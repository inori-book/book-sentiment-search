# 感想形容詞で探す本アプリ

## 概要
感想・読み味から本を検索できるWebアプリケーションです。ユーザーが入力した形容詞が感想に含まれている本を検索し、詳細情報を表示します。

## 機能
- 形容詞による本の検索
- 検索結果の詳細表示
- 楽天ブックスAPIとの連携
- 読み味レーダーチャート
- 感想ワードクラウド

## セットアップ

### 1. 依存関係のインストール
```bash
pip install -r requirements.txt
```

### 2. 環境変数の設定
`.streamlit/secrets.toml`ファイルを作成し、以下の内容を設定してください：

```toml
RAKUTEN_APP_ID = "your_rakuten_api_key_here"
```

### 3. フォントファイルの配置
日本語表示のため、以下のいずれかの方法でフォントファイルを配置してください：

#### 方法1: プロジェクトルートに配置（推奨）
- `ipag.ttf`ファイルをプロジェクトのルートディレクトリに配置
- アプリケーションが自動的に検出します

#### 方法2: Streamlit Cloud用の配置
- `ipag.ttf`ファイルを`/mnt/data/`ディレクトリに配置
- Streamlit Cloud環境での利用時に使用されます

#### 方法3: システムフォントを使用
- フォントファイルが配置されていない場合、システムのデフォルトフォントが使用されます
- 日本語表示が正しく行われない可能性があります

### 4. アプリケーションの起動
```bash
streamlit run app.py
```

## ファイル構成
```
book-recommender/
├── app.py                 # メインアプリケーション
├── database.csv           # 本のデータベース
├── abstractwords.txt      # 抽象語リスト
├── stopwords.txt          # ストップワード
├── ipag.ttf              # 日本語フォント（推奨）
├── requirements.txt       # 依存関係
└── README.md             # このファイル
```

## デプロイ

### Streamlit Cloud
1. GitHubリポジトリにコードをプッシュ
2. Streamlit Cloudでアプリケーションをデプロイ
3. 環境変数（RAKUTEN_APP_ID）を設定
4. フォントファイルが正しく配置されていることを確認

### ローカル環境
1. 上記のセットアップ手順に従って環境を構築
2. `streamlit run app.py`で起動

## セキュリティ
- HTMLインジェクション対策を実装
- APIキーは環境変数で管理
- 外部APIリクエストのエラーハンドリングを実装
- キャッシュのTTL設定でメモリ使用量を最適化

## トラブルシューティング

### フォントファイルが見つからない場合
- `ipag.ttf`ファイルが正しい場所に配置されているか確認
- ファイルの権限設定を確認
- システムのデフォルトフォントが使用されます

### 楽天APIエラーが発生する場合
- APIキーが正しく設定されているか確認
- 利用制限に達していないか確認
- ネットワーク接続を確認

## ライセンス
このプロジェクトはMITライセンスの下で公開されています。 